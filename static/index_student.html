<html>

<head>
<title>Physic Quiz Root</title>
<script src="jquery-3.1.1.min.js"></script>
</head>

<body>
<H1>PhyQuiz Student Page</H1>
<p>
Enter your name &nbsp;<input id="name" /> <br>
and student# &nbsp; <input id="number"/>
<br><button onclick="setNameAndNumber()">Apply</button> 
</p>

<p id="quizBlocked">
You need to enter your name and student number, followed by hitting the 
Apply button, before you can write a quiz.
</p>

<p >
<a id="quizNotBlocked" href="/rootQuiz.html">Click here to take a quiz</a> 
</p>

<script>
var haveNameAndNumber = false;
var studentName;
var studentNumber;

function checkNameAndNumber() {
  if( window.localStorage["phyquiz_studentname"]) {
      document.getElementById("name").value = studentName = 
         window.localStorage["phyquiz_studentname"];

      document.getElementById("number").value = studentNumber = 
         window.localStorage["phyquiz_studentnumber"];

      haveNameAndNumber = true; 
      document.getElementById("quizNotBlocked").style.display = "block";
      document.getElementById("quizBlocked").style.display = "none";
  }
  else {
      document.getElementById("quizNotBlocked").style.display = "none";
      document.getElementById("quizBlocked").style.display = "block";
  }
}


function setNameAndNumber() {
    studentName = document.getElementById("name").value;
    studentName = (typeof studentName == "string")?studentName.trim():null;
    studentNumber = document.getElementById("number").value;
    studentNumber = (typeof studentNumber == "string")?studentNumber.trim():null;
    //
    // this could be made a bit more error highlighting.
    //
    if( studentName && studentName.length > 2 && 
        studentNumber && studentNumber.length >= 6 ) {
          window.localStorage["phyquiz_studentname"] = studentName;
          window.localStorage["phyquiz_studentnumber"] = studentNumber;
    } 
    checkNameAndNumber();
}

checkNameAndNumber();

</script>
</body>
</html>
